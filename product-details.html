<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      direction: rtl;
      background: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø±ÙˆÙ†Ø© Ù„Ù„Ù…Ø¹Ø±Ø¶ ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„ Ø¬Ù†Ø¨Ù‹Ø§ Ø¥Ù„Ù‰ Ø¬Ù†Ø¨ */
    .product-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .slider-container {
      flex: 1 1 300px;
      position: relative;
      overflow: hidden;
      border-radius: 10px;
    }
    .slides {
      display: flex;
      transition: transform 0.3s ease;
    }
    .slides img {
      width: 100%;
      object-fit: cover;
    }
    .details {
      flex: 1 1 300px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .details p {
      margin: 10px 0;
    }
    .details .product-name {
      font-weight: bold;
      font-size: 24px;
      margin-bottom: 10px;
    }
    .details .price {
      color: #ff6666;
      font-size: 26px;
      margin-bottom: 10px;
    }
    .details .old-price {
      font-size: 18px;
      text-decoration: line-through;
      margin-bottom: 10px;
    }
    .details .discount {
      color: #ff0000;
      font-size: 18px;
      margin-bottom: 10px;
    }
    .details .description {
      margin-bottom: 10px;
    }
    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .order-btn, .buy-btn, .back-btn {
      background: green;
      color: #fff;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s ease;
      font-size: 16px;
    }
    .order-btn:hover, .buy-btn:hover { background: #006400; }
    .back-btn {
      background: #007bff;
    }
    .back-btn:hover { background: #0056b3; }
  </style>
</head>
<body>
  <div class="container">
    <div id="product-container"></div>
  </div>
  
  <script>
    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
    let product = JSON.parse(localStorage.getItem("selectedProduct"));
    // Ù…Ø¬Ù…ÙˆØ¹Ø© ØµÙˆØ± Ù„Ù„Ù…Ø¹Ø±Ø¶ (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)
    let slideImages = [
      product.img, 
      "https://via.placeholder.com/800x400/ff7f7f/333333?text=Ø§Ù„ØµÙˆØ±Ø©+2",
      "https://via.placeholder.com/800x400/7fbfff/333333?text=Ø§Ù„ØµÙˆØ±Ø©+3"
    ];
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ø³Ø­Ø¨
    let currentSlide = 0;
    function renderSlides() {
      const slidesContainer = document.getElementById("slides");
      slidesContainer.innerHTML = slideImages.map(src => `<img src="${src}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">`).join("");
    }
    function updateSlidePosition() {
      const slidesContainer = document.getElementById("slides");
      slidesContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
    }
    
    let startX = 0;
    let isDragging = false;
    const slider = document.getElementById("slider");
    function touchStart(e) {
      isDragging = true;
      startX = e.touches[0].clientX;
    }
    function touchMove(e) {
      if(!isDragging) return;
    }
    function touchEnd(e) {
      if(!isDragging) return;
      let endX = e.changedTouches[0].clientX;
      let diff = startX - endX;
      if(diff > 50 && currentSlide < slideImages.length - 1) {
        currentSlide++;
      } else if(diff < -50 && currentSlide > 0) {
        currentSlide--;
      }
      updateSlidePosition();
      isDragging = false;
    }
    
    // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø·Ù„Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† 10 Ø®Ø§Ù†Ø§Øª
    function generateOrderNumber() {
      let orderNumber = "";
      for(let i = 0; i < 10; i++){
        orderNumber += Math.floor(Math.random() * 10);
      }
      return orderNumber;
    }
    
    // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø±Ø¶ ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„ Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶Ù‡Ù…Ø§
    if(product) {
      document.getElementById("product-container").innerHTML = `
         <div class="product-flex">
           <div class="slider-container" id="slider" 
                ontouchstart="touchStart(event)" 
                ontouchmove="touchMove(event)" 
                ontouchend="touchEnd(event)">
             <div class="slides" id="slides">
               <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ -->
             </div>
           </div>
           <div class="details">
             <div>
               <div class="product-name">${product.name}</div>
               <div class="price">Ø§Ù„Ø³Ø¹Ø±: ${product.price} Ø±ÙŠØ§Ù„</div>
               <div class="old-price">Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„: ${product.price + 10} Ø±ÙŠØ§Ù„</div>
               <div class="discount">Ø§Ù„Ø®ØµÙ…: 10%</div>
               <div class="description"><strong>Ø§Ù„ØªÙØ§ØµÙŠÙ„:</strong> ${product.description}</div>
             </div>
             <div class="btn-group">
               <button class="order-btn" onclick="addToCart('${product.name}', ${product.price}, '${product.img}', '${product.description}')">ğŸ›’ Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
               <button class="buy-btn" onclick="buyNow('${product.name}', ${product.price})">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
               <button class="back-btn" onclick="window.location.href='index.html'">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚</button>
             </div>
           </div>
         </div>
      `;
      renderSlides();
    } else {
      document.getElementById("product-container").innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙØ§ØµÙŠÙ„ Ù„Ù„Ø¹Ø±Ø¶</p>";
    }
    
    function addToCart(name, price, img, description) {
       let cart = JSON.parse(localStorage.getItem("cart")) || [];
       cart.push({ name, price, img, description });
       localStorage.setItem("cart", JSON.stringify(cart));
       alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©");
    }
    
    // Ø¯Ø§Ù„Ø© "Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" ØªÙ†Ø´Ø¦ Ø±Ù‚Ù… Ø·Ù„Ø¨ ÙˆØªÙØªØ­ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
    function buyNow(name, price) {
      const orderNumber = generateOrderNumber();
      const message = `Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡: ${name}\nØ§Ù„Ø³Ø¹Ø±: ${price} Ø±ÙŠØ§Ù„\nØ±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderNumber}`;
      const phone = "966500640335"; // Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø´Ø±ÙƒØªÙƒ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }
  </script>
</body>
</html>
